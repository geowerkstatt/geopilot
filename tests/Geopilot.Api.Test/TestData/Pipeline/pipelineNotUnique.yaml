processes:
  - id: xtf_validator
    implementation: Geopilot.Api.Pipeline.Process.XtfValidatorProcess
    default_config:
      log_level: INFO
pipelines:
  - id: ili_validation
    display_name:
      en: XTF Validation
    parameters:
      upload_step: upload
      mapping:
        - file_extension: xtf
          attribute: ili_file
    steps:
      - id: validation
        display_name:
          en: XTF Validation 1
        process_id: xtf_validator
        process_config_overwrites:
          log_level: DEBUG
        input:
          - from: upload
            take: ili_file
            as: iliFile
        output:
          - take: error_log
            as: error_log
            action:
          - take: xtf_log
            as: xtf_log
            action:
              - DOWNLOAD
  - id: ili_validation
    display_name:
      en: XTF Validation 2
    parameters:
      upload_step: upload
      mapping:
        - file_extension: xtf
          attribute: ili_file
    steps:
      - id: validation
        display_name:
          en: XTF Validation
        process_id: xtf_validator
        process_config_overwrites:
          log_level: DEBUG
        input:
          - from: upload
            take: ili_file
            as: iliFile
        output:
          - take: error_log
            as: error_log
            action:
          - take: xtf_log
            as: xtf_log
            action:
              - DOWNLOAD
